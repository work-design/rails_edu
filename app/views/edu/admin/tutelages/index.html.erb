<div class="ui top attached segment">
  <%= render 'filter' %>
</div>

<table class="ui bottom attached selectable table">
  <thead>
    <tr>
      <th><%= Tutelage.human_attribute_name('pupil.real_name') %></th>
      <th><%= Tutelage.human_attribute_name('pupil.age') %></th>
      <th><%= Tutelage.human_attribute_name('pupil.gender') %></th>
      <th><%= Tutelage.human_attribute_name('pupil.note') %></th>
      <th>班级</th>
      <th>会员卡</th>
    </tr>
  </thead>
  <tbody>
  <% @tutelages.each do |tutelage| %>
    <tr>
      <td><%= tutelage.pupil.real_name %></td>
      <td><%= tutelage.pupil.age %></td>
      <td>
        <span class="ui icon label">
          <i class="fas <%= active_assert(tutelage.pupil.male?, expected: 'fa-male', unexpected: 'fa-female') %>"></i>
          <%= tutelage.pupil.gender_i18n %>
        </span>
      </td>
      <td><%= tutelage.pupil.note %></td>
      <td>
        <% tutelage.crowds.each do |crowd| %>
          <div class="ui image label">
            <%= image_tag crowd.logo if crowd.logo.present? %>
            <%= crowd.name %>
            <%= link_to crowd_admin_tutelage_path(tutelage, crowd_id: crowd.id), method: :delete do %>
              <i class="delete icon"></i>
            <% end %>
          </div>
        <% end %>
        <%= link_to crowd_admin_tutelage_path(tutelage), data: { tooltip: '分班' }, class: 'ui mini circular icon button', remote: true do %>
          <i class="hand point right icon"></i>
        <% end %>
      </td>
      <td>
        <% tutelage.cards.each do |card| %>
          <div class="ui image label">
            <%= link_to card.card_uuid, admin_card_card_logs_path(card), text: true %>
            <%= link_to card_admin_tutelage_path(tutelage, card_id: card.id), method: :delete do %>
              <i class="delete icon"></i>
            <% end %>
          </div>
        <% end %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>

<%= paginate @tutelages %>
