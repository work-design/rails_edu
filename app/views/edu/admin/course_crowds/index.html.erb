<%= render 'nav_course' %>

<%= render 'filter' %>

<div class="ui attached segment">
  <%= link_to 'confirm', check_admin_course_course_students_path(@course), id: 'checked_people', method: 'post', class: 'ui mini green label' %>
</div>

<table class="ui bottom attached table">
  <thead>
    <tr>
      <th>
        ID
        <%= check_box_tag :member_all, 1, false, onclick: "toggleAll(this, 'member_id')", id: nil %>
      </th>
      <th>Name</th>
      <th></th>
      <th></th>
      <th>Join Time</th>
      <th>Operate</th>
    </tr>
  </thead>
  <tbody>
  <% @crowds.each do |crowd| %>
  <tr>
    <td>
      <%= crowd.name %>
    </td>
    <td>
      <%= render partial: 'crowd_student', locals: { students: crowd.students } %>
    </td>
    <td>
      <div class="ui toggle checkbox">
        <% if @course.crowd_ids.include?(crowd.id) %>
          <%= check_box_tag :crowd_id, crowd.id, true, data: { method: :delete, remote: true, url: admin_course_course_crowds_path(@course, crowd.id), submit: true }, id: nil %>
        <% else %>
          <%= check_box_tag :crowd_id, crowd.id, false, data: { method: :post, remote: true, url: admin_course_course_crowds_path(@course), submit: true }, id: nil %>
        <% end %>
      </div>
    </td>
  </tr>
  <% end %>
  </tbody>
</table>
